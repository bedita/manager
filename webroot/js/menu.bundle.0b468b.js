(window.webpackJsonp=window.webpackJsonp||[]).push([["menu"],{59:function(e,t,s){var r={"./it":36,"./it.js":36};function i(e){var t=o(e);return s(t)}function o(e){var t=r[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=59},70:function(e,t,s){"use strict";s.r(t),t.default={name:"InputDynamicAttributes",props:{value:{type:[String,Boolean]},attrs:{type:Object,required:!0}},render(e){const t=this.attrs,s=Object.keys(t).filter(e=>e.startsWith("v-")).map(e=>{return{name:e.split("v-").pop()}});let r={value:this.value},i={input:e=>{this.$emit("update:value",e.target.value)}};return"checkbox"===t.type&&(r={checked:"true"===this.value},i={input:e=>{this.$emit("update:value",e.target.checked)}}),delete t.time,e("input",{directives:s,attrs:t,domProps:r,on:i})}}},74:function(e,t,s){"use strict";s.r(t);var r=s(29);t.default={extends:r.default,methods:{restoreItem(){this.selectedRows.length<1||document.getElementById("form-restore").submit()},deleteItem(){this.selectedRows.length<1||confirm("Confirm deletion of "+this.selectedRows.length+" item from the trash")&&document.getElementById("form-delete").submit()}}}},75:function(e,t,s){"use strict";s.r(t);var r=s(38);t.default={extends:r.default}},77:function(e,t,s){"use strict";s.r(t);var r=s(29);t.default={extends:r.default,components:{AutosizeTextarea:()=>Promise.all([s.e("edit-relation-params"),s.e("tree-list")]).then(s.bind(null,68))},props:{resources:{},csrfToken:{type:String,required:!0}},data:()=>({propertyTypes:[],deletedPropertyTypes:[],savedPropertyTypes:[],newPropertyTypes:[],removePropertyTypes:[],editPropertyTypes:[]}),mounted(){this.propertyTypes=JSON.parse(this.resources)},computed:{formIsModified(){const e=!!(this.newPropertyTypes.length||this.removePropertyTypes.length||this.editPropertyTypes.length);return this.$el&&this.$el.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{id:this.$vnode.tag,isChanged:e}})),e}},methods:{editPropParams(e,t){let s=null;try{""!==t&&(s=JSON.parse(t),Object.keys(s).length||(s=null))}catch(e){return void console.info("[editPropParams] params JSON parse failed - skipping this one...")}const r={id:e,attributes:{params:s}};this.editPropertyType(r)},editPropName(e,t){const s={id:e,attributes:{name:t}};this.editPropertyType(s)},addRow(){this.newPropertyTypes.push({name:"",params:""})},removeRow(e){const t=this.newPropertyTypes.indexOf(e);-1!==t&&this.newPropertyTypes.splice(t,1)},removePropertyType(e){this.removePropertyTypes.push(e)},undoRemovePropertyType(e){const t=this.removePropertyTypes.indexOf(e);-1!==t&&this.removePropertyTypes.splice(t,1)},save(e){if(this.removePropertyTypes.length&&!confirm(`Do you really want to trash these property types? ${this.removePropertyTypes.join(", ")}`))return void e.preventDefault();let t=window.location.href.replace(window.location.search,""),s=new Headers({"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":this.csrfToken}),r={_csrfToken:this.csrfToken,addPropertyTypes:[...this.newPropertyTypes],removePropertyTypes:[...this.removePropertyTypes],editPropertyTypes:[...this.editPropertyTypes]};const i={method:"POST",credentials:"same-origin",headers:s,body:JSON.stringify(r)},o=`${t}/savePropertyTypesJson`;fetch(o,i).then(e=>e.json()).then(e=>{const t=e.saved||[],s=e.removed||[],r=e.edited||[];this.savedPropertyTypes.push(...t),this.deletedPropertyTypes.push(...s),r.forEach(e=>{this.propertyTypes=this.propertyTypes.map(t=>t.id===e.id?e:t),this.savedPropertyTypes=this.savedPropertyTypes.map(t=>t.id===e.id?e:t)}),this.$children.forEach(e=>{try{JSON.parse(e.text)}catch(t){e.text=e.originalValue}}),this.newPropertyTypes=[],this.removePropertyTypes=[],this.editPropertyTypes=[]}).catch(e=>{console.log(e)})},editPropertyType(e){let t=[...this.propertyTypes,...this.savedPropertyTypes];const[s]=t.filter(t=>t.id==e.id);this.editPropertyTypes.filter(t=>t.id===e.id).length?this.editPropertyTypes=this.editPropertyTypes.map(t=>t.id===e.id?{id:e.id,attributes:{...t.attributes,...e.attributes}}:t):this.editPropertyTypes.push(e),this.editPropertyTypes=this.editPropertyTypes.filter(e=>{return!(Object.keys(e.attributes).filter(t=>JSON.stringify(e.attributes[t])===JSON.stringify(s.attributes[t])).length===Object.keys(e.attributes).length)})},formatParams(e){let t="";if(e&&e.attributes&&e.attributes.params)try{t=JSON.stringify(e.attributes.params,null,4)}catch(e){t=e.message}return t},containsId:(e,t)=>e.filter(e=>"object"==typeof e&&"id"in e?e.id===t:e===t).length}}},80:function(e,t,s){"use strict";s.r(t),t.default={props:{types:{type:Array,default:[]}},data:()=>({selectedTypes:()=>[]}),mounted(){let e=new URLSearchParams(window.location.search).entries(),t=[];for(let i of e){var s=i[0],r=i[1];s.startsWith("filter[type]")&&t.push(r)}this.selectedTypes=t},computed:{},watch:{selectedTypes(e){this.$emit("updatequerytypes",e)}},methods:{togglaAll(){this.selectedTypes.length&&(this.selectedTypes=[])}}}},81:function(e,t,s){"use strict";s.r(t),t.default={data:()=>({popUpAction:"",searchString:""}),methods:{togglePopup(e){e==this.popUpAction?this.popUpAction="":(this.popUpAction=e,this.$nextTick(()=>{this.$refs.searchInput.focus()}))},captureKeys(e){switch(e.which||e.keyCode||0){case 13:this.go();break;case 27:this.popUpAction=""}},go(){let e="";"search"==this.popUpAction?e+="/objects?q=":"go"==this.popUpAction&&(e+="/view/"),this.searchString&&e&&(window.location.href=BEDITA.base+e+this.searchString)}}}},83:function(e,t,s){"use strict";s.r(t);s(58);var r=s(27),i=s.n(r),o=s(35),a=s.n(o),n=s(60),p=s(61),d=s(62),l=s(63),c=s(64),h=s(65);const y={it:n.Italian,fr:p.French,de:d.German,es:l.Spanish,cat:c.Catalan,pt:h.Portuguese},u={enableTime:!1,altInput:!0,dateFormat:"Z",altFormat:"D/M/Y",animate:!1,time_24hr:!0},m=BEDITA.locale.slice(0,2);t.default={template:"\n    <div>\n        <slot></slot>\n    </div>\n    ",props:{el:{type:HTMLInputElement},attrs:{type:Object,required:!0}},async mounted(){"en"!==m&&(a.a.locale(m),i.a.localize(y[m]));let e=this.el,t=Object.assign({},u);this.attrs.time&&(t.enableTime=!0,t.altFormat="D/M/Y HH:mm"),t.formatDate=((e,t)=>{if("Z"===t)return a()(e).toISOString();let s=(new Date).getTimezoneOffset()/60,r=`${t} (UTC${s<0?"+":"-"}${Math.abs(s)})`;return a()(e).format(r)});try{let s=i()(e,t);e.dataset.originalValue=e.value;let r=document.createElement("span");r.classList.add("clear-button"),r.innerHTML="&times;",r.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),s.clear()}),e.parentElement.appendChild(r)}catch(e){console.error(e)}}}},85:function(e,t,s){"use strict";s.r(t);var r=s(6);t.default={template:"\n    <div>\n        <slot></slot>\n    </div>\n    ",props:{el:{type:HTMLTextAreaElement}},async mounted(){if("undefined"==typeof CKEDITOR){var e=document.createElement("script");e.type="text/javascript",e.src="https://cdn.ckeditor.com/4.11.3/standard/ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}const t=this.el,s=t.getAttribute("ckconfig");let i={};r.b&&(i=r.b[s]),this.setupCKEDITOR(t,i)},methods:{setupCKEDITOR(e,t){setTimeout(()=>{if("undefined"==typeof CKEDITOR)this.setupCKEDITOR(e,t);else{let s=CKEDITOR.replace(e,t);e.dataset.originalValue=e.value,s.on("change",()=>{e.value=s.getData();let t=e.value!==e.dataset.originalValue;e.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{id:e.id,isChanged:t}}))})}},25)}}}}}]);