{% do _view.assign('title', currentModule.name|humanize) %}

<modules-view inline-template>

    <div class="modules-view"
        v-hotkey="keyEvents">
        <header class="layout-header">
            {% element 'Modules/header' %}
        </header>

        {% if ((object.id is empty) and (objectType in ['images', 'files', 'audio', 'videos'])) %}
        <div class="upload-form">
            <h1>{{ __('Upload') }}</h1>
            {% element 'Form/upload' %}
        </div>
        {% endif %}

        <div class="module-form">
            {{ Form.create({'defaults': object.attributes, 'schema': {}}, {
                'url': {'_name': 'modules:save', 'object_type': objectType},
                'id': 'form-main',
                '@submit': 'validateBeforeSubmit($event)',
            })|raw }}

            <h1>{{ object.attributes.title|default(__('New')) }}</h1>

            {% element 'Form/core_properties' %}

            {% element 'Form/included' %}

            {% element 'Form/publish_properties' %}

            {% element 'Form/advanced_properties' %}

            {% element 'Form/other_properties' %}

            {% element 'Form/relations' %}

            {% element 'Form/trees' %}

            {% element 'Form/meta' %}

            {# Append "Save" to commands in commands menu. Must stay here, before the form end. #}
            {% do _view.append('commands', Form.submit(__('Save'), {'form': 'form-main'})) %}

            {{ Form.end()|raw }}
        </div>

        {# Append "Delete" to commands in commands menu. #}
        {% do _view.append('commands', Form.postButton(__('Delete'), {'_name': 'modules:delete', 'object_type': objectType}, {'data': {'id': object.id}})) %}

    </div>

</modules-view>
