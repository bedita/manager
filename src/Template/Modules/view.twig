{% do _view.assign('title', currentModule.name|humanize) %}

{{ Form.create({'defaults': object.attributes, 'schema': {}}, {
    'url': {'_name': 'modules:save', 'object_type': objectType},
    'id': 'form--main',
})|raw }}
{{ Form.hidden('id', {'value': object.id})|raw }}
<div class="view-modules-form">

    <section>
        {% if object.id %}
            <h1 {{ object.attributes.title ? '' : 'class="missing-title"' }}>{{ object.attributes.title|default(__('Untitled')) }}</h1>
        {% endif %}
    </section>
    <section>
        {% element 'Form/core_properties' %}
    </section>
    <section>
        {% element 'Form/status' %}
    </section>
    <section>
        {% element 'Form/other_properties' %}
    </section>
    <section>
        {% element 'Form/relations' %}
    </section>
    <section>
        {% element 'Form/meta' %}
    </section>

    {# Append "Save" to commands in commands menu. Must stay here, before the form end. #}
    {% do _view.append('commands', Form.submit(__('Save'), {'form': 'form--main'})) %}

</div>
{{ Form.end()|raw }}

{# Append "Delete" to commands in commands menu. #}
{% do _view.append('commands', Form.postButton(__('Delete'), {'_name': 'modules:delete', 'object_type': objectType}, {'data': {'id': object.id}})) %}
