{#
    load-on-start, loading events timing:
    1000ms    - first relation
    gap 200ms - till last relation
#}

{% if relations %}
<section class="relations">

    {% for relationName in relations %}

        <div class="relation">
            <property-view inline-template :tab-open="tabsOpen" ref={{ relationName }}>
                <section class="fieldset order-{{ cssOrder }}" id="trees" :class="isOpen? '' : 'closed'">

                    <header @click.prevent="toggleVisibility();" class="tab unselectable" v-bind:class="isLoading? 'is-loading-spinner' : ''">
                        <h2>{{ relationName|humanize|lower }}<span class="small-notification"
                                                                v-bind:class="!count? 'empty' : ''"><: count :></span></h2>
                    </header>

                    <div v-show="isOpen" class="tab-container">
                        {% set wait = 1000 + (loop.index * 200) %}
                        {% element 'Form/relation' {'relationName': relationName, 'loadOnStart': wait } %}
                    </div>

                </section>
            </property-view>
        </div>

    {% endfor %}

</section>
{% endif %}
