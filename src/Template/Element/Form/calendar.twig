{# Calendar: use date_ranges if set in object attributes#}

{% if object.attributes.date_ranges is defined %}

<property-view inline-template :tab-open="tabsOpen">
<section class="fieldset order-{{ cssOrder }}" id="date_ranges" :class="isOpen? '' : 'closed'">

    <header @click.prevent="toggleVisibility()" class="tab unselectable">
        <h2>{{ __('Calendar') }}</h2>
    </header>

   <div v-show="isOpen" class="tab-container">
        <date-ranges-view inline-template data-items={{ object.attributes.date_ranges|json_encode }}>
            <table>
            <thead>
            <tr>
                <td>#</td>
                <td>{{ __('Start Date') }}</td>
                <td>{{ __('End Date') }}</td>
                <td></td>
            </tr>
            </thead>
            <tbody>
            <tr v-for="(dateRange, index) in dateRanges">
                <td><: index :></td>
                <td>
                    <input type="text"
                        :name="'date_ranges[' + index + '][start_date]'"
                        v-model="dateRange.start_date"
                        v-datepicker="true" date="true" time="true" />
                </td>
                <td>
                    <input type="text"
                        :name="'date_ranges[' + index + '][end_date]'"
                        v-model="dateRange.end_date"
                        v-datepicker="true" date="true" time="true" />
                </td>
                <td>
                    <button @click="remove(index, $event)">{{ __('Remove') }}</button>
                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <button @click="add">{{ __('Add') }}</button>
                </td>
            </tr>
            </tbody>
            </table>
        </date-ranges-view>
        {{ Form.unlockField('date_ranges')}}
    </div>
</section>
</property-view>

{% endif %}
